!function n(o,r,a){function s(e,t){if(!r[e]){if(!o[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(u)return u(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}i=r[e]={exports:{}},o[e][0].call(i.exports,function(t){return s(o[e][1][t]||t)},i,i.exports,n,o,r,a)}return r[e].exports}for(var u="function"==typeof require&&require,t=0;t<a.length;t++)s(a[t]);return s}({1:[function(a,s,t){!function(t){!function(){var n="undefined"!=typeof window?window.L:void 0!==t?t.L:null,i=a("fetch-jsonp"),r=a("bbox-intersect");var e=["Aerial","AerialWithLabels","AerialWithLabelsOnDemand","Road","RoadOnDemand","CanvasLight","CanvasDark","CanvasGray","OrdnanceSurvey"],o=["AerialWithLabelsOnDemand","RoadOnDemand"];n.TileLayer.Bing=n.TileLayer.extend({options:{bingMapsKey:null,imagerySet:"Aerial",culture:"en-US",minZoom:1,minNativeZoom:1,maxNativeZoom:19},statics:{METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}?key={bingMapsKey}&include=ImageryProviders&uriScheme=https&c={culture}",POINT_METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}/{lat},{lng}?zl={z}&key={bingMapsKey}&uriScheme=https&c={culture}"},initialize:function(t){if((t="string"==typeof t?{bingMapsKey:t}:t)&&t.BingMapsKey&&(t.bingMapsKey=t.BingMapsKey,console.warn("use options.bingMapsKey instead of options.BingMapsKey")),!t||!t.bingMapsKey)throw new Error("Must supply options.BingMapsKey");if(t=n.setOptions(this,t),e.indexOf(t.imagerySet)<0)throw new Error("'"+t.imagerySet+"' is an invalid imagerySet, see https://github.com/digidem/leaflet-bing-layer#parameters");t&&t.style&&o.indexOf(t.imagerySet)<0&&console.warn("Dynamic styles will only work with these imagerySet choices: "+o.join(", "));t=n.Util.template(n.TileLayer.Bing.METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,culture:this.options.culture});this._imageryProviders=[],this._attributions=[],this._fetch=i(t,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).then(this._metaDataOnLoad.bind(this)).catch(console.error.bind(console)),n.Browser.android||this.on("tileunload",this._onTileRemove)},createTile:function(t,e){var i=document.createElement("img");return n.DomEvent.on(i,"load",n.bind(this._tileOnLoad,this,e,i)),n.DomEvent.on(i,"error",n.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",this._url?i.src=this.getTileUrl(t):this._fetch.then(function(){i.src=this.getTileUrl(t)}.bind(this)).catch(function(t){console.error(t),e(t)}),i},getTileUrl:function(t){var e=((t,e,i)=>{for(var n="",o=i;0<o;o--){var r=0,a=1<<o-1;0!=(t&a)&&r++,0!=(e&a)&&(r+=2),n+=r.toString()}return n})(t.x,t.y,t.z),e=n.Util.template(this._url,{quadkey:e,subdomain:this._getSubdomain(t),culture:this.options.culture,token:this.options.bingMapsKey});return"string"==typeof this.options.style&&(e+="&st="+this.options.style),e},onAdd:function(e){e.on("moveend",this._updateAttribution,this),n.TileLayer.prototype.onAdd.call(this,e),this._attributions.forEach(function(t){e.attributionControl.addAttribution(t)})},onRemove:function(e){e.off("moveend",this._updateAttribution,this),this._attributions.forEach(function(t){e.attributionControl.removeAttribution(t)}),n.TileLayer.prototype.onRemove.call(this,e)},getMetaData:function(t,e){if(!(this._map||t&&e))return Promise.reject(new Error("If layer is not attached to map, you must provide LatLng and zoom"));t=t||this._map.getCenter(),e=e||this._map.getZoom();e=n.Util.template(n.TileLayer.Bing.POINT_METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,z:e,lat:t.lat,lng:t.lng});return i(e,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).catch(console.error.bind(console))},_metaDataOnLoad:function(t){if(200!==t.statusCode)throw new Error("Bing Imagery Metadata error: \n"+JSON.stringify(t,null,"  "));t=t.resourceSets[0].resources[0];return this._url=t.imageUrl,this._imageryProviders=t.imageryProviders||[],this.options.subdomains=t.imageUrlSubdomains,this._updateAttribution(),Promise.resolve()},_updateAttribution:function(){var t,n,e,o=this._map;o&&o.attributionControl&&(t=o.getZoom(),n=[(e=(e=o.getBounds().toBBoxString()).split(","))[1],e[0],e[3],e[2]],this._fetch.then(function(){var e=this._getAttributions(n,t),i=this._attributions;e.forEach(function(t){-1<i.indexOf(t)||o.attributionControl.addAttribution(t)}),i.filter(function(t){-1<e.indexOf(t)||o.attributionControl.removeAttribution(t)}),this._attributions=e}.bind(this)))},_getAttributions:function(n,o){return this._imageryProviders.reduce(function(t,e){for(var i=0;i<e.coverageAreas.length;i++)if(r(n,e.coverageAreas[i].bbox)&&o>=e.coverageAreas[i].zoomMin&&o<=e.coverageAreas[i].zoomMax)return t.push(e.attribution),t;return t},[])}}),n.tileLayer.bing=function(t){return new n.TileLayer.Bing(t)},s.exports=n.TileLayer.Bing}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bbox-intersect":2,"fetch-jsonp":3}],2:[function(t,e,i){e.exports=function(t,e){return!(t[0]>e[2]||t[2]<e[0]||t[3]<e[1]||t[1]>e[3])}},{}],3:[function(t,e,i){var n,o;n=this,o=function(t,e){var i=5e3,n="callback";function d(e){try{delete window[e]}catch(t){window[e]=void 0}}function h(t){t=document.getElementById(t);t&&document.getElementsByTagName("head")[0].removeChild(t)}e.exports=function(r){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=r,u=a.timeout||i,l=a.jsonpCallback||n,c=void 0;return new Promise(function(e,t){var i=a.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),n=l+"_"+i,o=(window[i]=function(t){e({ok:!0,json:function(){return Promise.resolve(t)}}),c&&clearTimeout(c),h(n),d(i)},s+=-1===s.indexOf("?")?"?":"&",document.createElement("script"));o.setAttribute("src",""+s+l+"="+i),a.charset&&o.setAttribute("charset",a.charset),a.nonce&&o.setAttribute("nonce",a.nonce),a.referrerPolicy&&o.setAttribute("referrerPolicy",a.referrerPolicy),a.crossorigin&&o.setAttribute("crossorigin","true"),o.id=n,document.getElementsByTagName("head")[0].appendChild(o),c=setTimeout(function(){t(new Error("JSONP request to "+r+" timed out")),d(i),h(n),window[i]=function(){d(i)}},u),o.onerror=function(){t(new Error("JSONP request to "+r+" failed")),d(i),h(n),c&&clearTimeout(c)}})}},"function"==typeof define&&define.amd?define(["exports","module"],o):void 0!==i&&void 0!==e?o(0,e):(o(o={exports:{}},o),n.fetchJsonp=o.exports)},{}]},{},[1]);